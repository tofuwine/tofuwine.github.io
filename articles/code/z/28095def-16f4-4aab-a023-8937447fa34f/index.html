<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>FreeMarker 基本用法 | Tofuwine's Blog</title>
<meta name=keywords content><meta name=description content="FreeMarker 基本语法介绍"><meta name=author content="tofuwine"><link rel=canonical href=https://tofuwine.github.io/articles/code/z/28095def-16f4-4aab-a023-8937447fa34f/><meta name=google-site-verification content="ckyTuus1DUaw4_LZBZpYeGKqKWmtHFLEeqp1rsXNwZA"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><meta name=baidu-site-verification content="codeva-9WUKJrZrua"><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "d28b07fc964a45f4aeb37a3550910329"}'></script><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://tofuwine.github.io/images/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://tofuwine.github.io/images/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://tofuwine.github.io/images/favicon.svg><link rel=apple-touch-icon href=https://tofuwine.github.io/images/favicon.svg><link rel=mask-icon href=https://tofuwine.github.io/images/favicon.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://tofuwine.github.io/articles/code/z/28095def-16f4-4aab-a023-8937447fa34f/><noscript><style>#theme-toggle,#top-link{display:none}</style></noscript><link crossorigin=anonymous href=/assets/css/pe.min.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/pe.min.js></script><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/all.min.css><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/v4-shims.min.css><script id=MathJax-script async src=https://cdn.staticfile.net/mathjax/3.2.2/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["$$","$$"]],inlineMath:[["\\$","\\$"]]}}</script><meta property="og:title" content="FreeMarker 基本用法"><meta property="og:description" content="FreeMarker 基本语法介绍"><meta property="og:type" content="article"><meta property="og:url" content="https://tofuwine.github.io/articles/code/z/28095def-16f4-4aab-a023-8937447fa34f/"><meta property="article:section" content="articles"><meta property="article:published_time" content="2024-03-31T11:10:20+08:00"><meta property="og:site_name" content="Tofuwine's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="FreeMarker 基本用法"><meta name=twitter:description content="FreeMarker 基本语法介绍"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"📝 文章","item":"https://tofuwine.github.io/articles/"},{"@type":"ListItem","position":2,"name":"🖥️ 计算机编程技术","item":"https://tofuwine.github.io/articles/code/"},{"@type":"ListItem","position":3,"name":"FreeMarker 基本用法","item":"https://tofuwine.github.io/articles/code/z/28095def-16f4-4aab-a023-8937447fa34f/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"FreeMarker 基本用法","name":"FreeMarker 基本用法","description":"FreeMarker 基本语法介绍","keywords":[""],"articleBody":"简介 Apache FreeMarker™ 是一个模板引擎：一个基于模板和变更数据生成文本输出（HTML 网页、电子邮件、配置文件、源代码等）的 Java 库。\nFreeMarker 没有其他任何依赖，仅仅依赖 Java 自身。\n最新版本：FreeMarker 2.3.32（2023-01-12）\nmaven 依赖 普通 Java 工程按如下方式引入：\nxml pom.xml 1 2 3 4 5 6 org.freemarker freemarker 2.3.32 如果是 Spring Boot 工程可以引入 spring-boot-starter-freemarker：\nxml pom.xml 1 2 3 4 5 org.springframework.boot spring-boot-starter-freemarker 代码示例 普通工程 以下代码来源于 FreeMarker 官方教程：\njava 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 import freemarker.template.*; import java.util.*; import java.io.*; public class Test { public static void main(String[] args) throws Exception { /* ------------------------------------------------------------------------ */ /* You should do this ONLY ONCE in the whole application life-cycle: */ /* Create and adjust the configuration singleton */ Configuration cfg = new Configuration(Configuration.VERSION_2_3_32); cfg.setDirectoryForTemplateLoading(new File(\"/where/you/store/templates\")); // Recommended settings for new projects: cfg.setDefaultEncoding(\"UTF-8\"); cfg.setTemplateExceptionHandler(TemplateExceptionHandler.RETHROW_HANDLER); cfg.setLogTemplateExceptions(false); cfg.setWrapUncheckedExceptions(true); cfg.setFallbackOnNullLoopVariable(false); cfg.setSQLDateAndTimeTimeZone(TimeZone.getDefault()); /* ------------------------------------------------------------------------ */ /* You usually do these for MULTIPLE TIMES in the application life-cycle: */ /* Create a data-model */ Map root = new HashMap(); root.put(\"user\", \"Big Joe\"); Product latest = new Product(); latest.setUrl(\"products/greenmouse.html\"); latest.setName(\"green mouse\"); root.put(\"latestProduct\", latest); /* Get the template (uses cache internally) */ Template temp = cfg.getTemplate(\"test.ftlh\"); /* Merge data-model with template */ Writer out = new OutputStreamWriter(System.out); temp.process(root, out); // Note: Depending on what `out` is, you may need to call `out.close()`. // This is usually the case for file output, but not for servlet output. } } Product 类如下：\njava 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 /** * Product bean; note that it must be a public class! */ public class Product { private String url; private String name; // As per the JavaBeans spec., this defines the \"url\" bean property // It must be public! public String getUrl() { return url; } public void setUrl(String url) { this.url = url; } // As per the JavaBean spec., this defines the \"name\" bean property // It must be public! public String getName() { return name; } public void setName(String name) { this.name = name; } } FreeMarker 模板 test.ftlh 如下：\nhtml 1 2 3 4 5 6 7 8 9 10 \u003chtml\u003e \u003chead\u003e \u003ctitle\u003eWelcome!\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003ch1\u003eWelcome ${user}!\u003c/h1\u003e \u003cp\u003eOur latest product: \u003ca href=\"${latestProduct.url}\"\u003e${latestProduct.name}\u003c/a\u003e! \u003c/body\u003e \u003c/html\u003e Spring Boot 工程 在 Spring Boot 中实现上述功能（需引入 spring-boot-starter-freemarker 依赖）：\njava 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 import freemarker.template.Configuration; import freemarker.template.Template; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.boot.ApplicationArguments; import org.springframework.boot.ApplicationRunner; import org.springframework.stereotype.Component; import java.io.OutputStreamWriter; import java.io.Writer; import java.util.HashMap; import java.util.Map; @Component public class TestRunner implements ApplicationRunner { private Configuration configuration; @Autowired public void setConfiguration(Configuration configuration) { this.configuration = configuration; } @Override public void run(ApplicationArguments args) throws Exception { Map root = new HashMap(); root.put(\"user\", \"Big Joe\"); Product latest = new Product(); latest.setUrl(\"products/greenmouse.html\"); latest.setName(\"green mouse\"); root.put(\"latestProduct\", latest); Template temp = configuration.getTemplate(\"test.ftlh\"); Writer out = new OutputStreamWriter(System.out); temp.process(root, out); } } Product 类（使用 Lombok)：\njava 1 2 3 4 5 6 7 import lombok.Data; @Data public class Product { private String url; private String name; } 模板文件放在 /resources/templates 目录下。\n提示 Spring Boot 默认封装了 FreeMarker 配置，我们可以直接注入使用。也可以修改 FreeMarker 配置，如缓存、模板路径、模板文件后缀等。配置节点以 spring.freemarker 为前缀。 模板语法 提示 具体详细的语法及说明应参考官方文档。 模板结构 FTL 模板由以下部分混合而成：\n文本（Text）： 文本内容会原样输出。 插值（Interpolation）：这部分的输出会被计算结果替代。插值使用 ${...}。（注：#{...} 已被弃用。See more here） FTL 标签（FTL tags）：与 HTML 标签相似，用于 FreeMarker 指令。 注释（Comments）：使用 \u003c#-- 和 --\u003e 来分隔。注释会被 FreeMarker 直接忽略，不会在输出内容中显示。 插值 标准格式为：${expression} 。其中 expression 可以是所有类型的表达式。如：${100 + x}\n提示 插值表达式也可以使用 [=expression] 形式。参考 See more about alternative syntaxes… 表达式 直接指定值 Strings: \"Foo\" or 'Foo' or \"It's \\\"quoted\\\"\" or 'It\\'s \"quoted\"' or r\"C:\\raw\\string\" Numbers: 123.45 Booleans: true, false Sequences: [\"foo\", \"bar\", 123.45]; Ranges: 0..9, 0..\u003c10 (or 0..!10), 0.. Hashes: {\"name\":\"green mouse\", \"price\":150} 检索变量 顶层变量: user 从 Hashes 中检索数据: user.name, user[\"name\"] 从 Sequences 中检索数据: products[5] 特殊变量: .main 字符串操作 插值（或连接）: \"Hello ${user}!\" (or \"Hello \" + user + \"!\") 获取一个字符: name[0] 字符串切片 Inclusive end: name[0..4], Exclusive end: name[0..\u003c5], Length-based (lenient): name[0..*5], Remove starting: name[5..] Sequence 操作 连接: users + [\"guest\"] Sequence 切片: Inclusive end: products[20..29], Exclusive end: products[20..\u003c30], Length-based (lenient): products[20..*10], Remove starting: products[20..] Hash 操作 连接: passwords + { \"joe\": \"secret42\" } 算数运算: (x * 1.5 + 10) / 2 - y % 100 比较运算: x == y, x != y, x \u003c y, x \u003e y, x \u003e= y, x \u003c= y, x lt y, x lte y, x gt y, x gte y, …etc. 逻辑操作: !registered \u0026\u0026 (firstVisit || fromEurope) 内建函数: name?upper_case, path?ensure_starts_with('/') 方法调用: repeat(\"What\", 3) 处理不存在的值: 默认值: name!\"unknown\" or (user.name)!\"unknown\" or name! or (user.name)! 检测不存在值: name?? or (user.name)?? 赋值操作: =, +=, -=, *=, /=, %=, ++, -- Local lambdas: x -\u003e x + 1, (x, y) -\u003e x + y 内置函数参考 字母索引 字符串内置函数 数字内置函数 日期内置函数 布尔值内置函数 序列内置函数 哈希内置函数 结点（XML） 内置函数 循环变量内置函数 独立类型内置函数 很少使用的专家内置函数 指令 标准格式是使用两种 FTL 标签：\n开始标签：\u003c#directivename parameters\u003e 结束标签：\u003c/#directivename\u003e 例如：\u003c#if something\u003e...\u003c/#if\u003e\nFTL 标签与 HTML 标签一样，必须正确嵌套。所以下面的代码是错误的，因为 if 指令既在 list 指令的嵌套内容的内部又在外部：\nhtml 1 2 3 4 5 6 7 8 \u003cul\u003e \u003c#list animals as animal\u003e \u003cli\u003e${animal.name} for ${animal.price} Euros \u003c#if user == \"Big Joe\"\u003e (except for you) \u003c/#list\u003e \u003c#-- WRONG! The \"if\" has to be closed first. --\u003e \u003c/#if\u003e \u003c/ul\u003e 提示 FreeMarker 可以使用 [ 和 ] 替代 \u003c 和 \u003e。例如：[#if user == \"Big Joe\"]...[/#if]。\n更多信息请阅读：Miscellaneous/Alternative (square bracket) syntax.\n指令参考：\nAlphabetical index assign attempt, recover autoesc compress escape, noescape (deprecated) flush ftl function, return global if, else, elseif import include list, else, items, sep, break, continue local macro, nested, return noautoesc noparse nt outputformat setting stop switch, case, default, break t, lt, rt User-defined directive (\u003c@…\u003e) visit, recurse, fallback 参考 FreeMarker 官方文档 FreeMarker 中文手册 附录 FreeMarker 支持的转义字符 Escape sequence Meaning \\\" 引号 (u0022) \\' 单引号 (u0027) \\{ 起始花括号:{ \\= 等号:= (Supported since FreeMarker 2.3.28.) \\\\ 反斜杠 (u005C) \\n 换行符 (u000A) \\r 回车 (u000D) \\t 水平制表符(又称为tab) (u0009) \\b 退格 (u0008) \\f 换页 (u000C) \\l 小于号:\u003c \\g 大于号:\u003e \\a \u0026 符:\u0026 \\xCode 字符的十六进制Unicode 码 (UCS code) 在 \\x 之后的 Code 是 1-4 位的十六进制码。下面这个示例中都是在字符串中放置版权符号： \"\\xA9 1999-2001\"， \"\\x0A9 1999-2001\"， \"\\x00A9 1999-2001\"。 如果紧跟十六进制码后一位的字符也能解释成十六进制码时， 就必须把 4 位补全，否则 FreeMarker 就会误解你的意图。\nFTL 中的保留名称 下面的这些名称不能在非方括号语法中被用作顶层变量 (比如 .vars[\"in\"])，因为这是 FTL 中的关键字：\ntrue：布尔值\"true\" false：布尔值\"false\" gt：比较运算符\"大于\" gte：比较运算符\"大于或等于\" lt：比较运算符\"小于\" lte：比较运算符\"小于或等于\" as：由少数指令使用 in：由少数指令使用 using：由少数指令使用 ","wordCount":"1035","inLanguage":"zh","datePublished":"2024-03-31T11:10:20+08:00","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"tofuwine"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tofuwine.github.io/articles/code/z/28095def-16f4-4aab-a023-8937447fa34f/"},"publisher":{"@type":"Organization","name":"Tofuwine's Blog","logo":{"@type":"ImageObject","url":"https://tofuwine.github.io/images/favicon.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tofuwine.github.io/><img src=https://tofuwine.github.io/images/profile.png alt aria-label=logo height=35>Tofuwine's Blog</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://tofuwine.github.io/articles><span>📝 文章</span></a></li><li><a href=https://tofuwine.github.io/archives><span>🗂️ 归档</span></a></li><li><a href=https://tofuwine.github.io/friend><span>🤝 友链</span></a></li><li><a href=https://tofuwine.github.io/about><span>🧑‍💻 关于</span></a></li><li><a href=https://tofuwine.github.io/search accesskey=/><span>🔍 搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://tofuwine.github.io/>🏠 主页</a>&nbsp;»&nbsp;<a href=https://tofuwine.github.io/articles/>📝 文章</a>&nbsp;»&nbsp;<a href=https://tofuwine.github.io/articles/code/>🖥️ 计算机编程技术</a></div><h1 class="post-title entry-hint-parent">FreeMarker 基本用法</h1><div class=post-meta><span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>2024-03-31</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg><span>1035 字</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>5 分钟</span></span>
<span class=pe-post-meta-item>&nbsp;·&nbsp;<svg t="1714036239378" fill="currentcolor" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="6659" width="256" height="256"><path d="M690 78.2c-18.6-18.8-49-19-67.8-.4s-19 49-.4 67.8l255.4 258.6c67.8 68.6 67.8 178.8.0 247.4L653.4 878.2c-18.6 18.8-18.4 49.2.4 67.8s49.2 18.4 67.8-.4l224-226.4c104.8-106 104.8-276.4.0-382.4L690 78.2zM485.4 101.4c-24-24-56.6-37.4-90.6-37.4H96C43 64 0 107 0 160v299c0 34 13.4 66.6 37.4 90.6l336 336c50 50 131 50 181 0l267-267c50-50 50-131 0-181l-336-336zM96 160h299c8.4.0 16.6 3.4 22.6 9.4l336 336c12.4 12.4 12.4 32.8.0 45.2l-267 267c-12.4 12.4-32.8 12.4-45.2.0l-336-336c-6-6-9.4-14.2-9.4-22.6V160zm192 128a64 64 0 10-128 0 64 64 0 10128 0z" p-id="6660"/></svg></span><ul class=pe-post-meta-item><a href=https://tofuwine.github.io/tags/freemarker/>#FreeMarker</a></ul></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=简介>简介</a><li><a href=#maven-%e4%be%9d%e8%b5%96 aria-label="maven 依赖">maven 依赖</a><li><a href=#%e4%bb%a3%e7%a0%81%e7%a4%ba%e4%be%8b aria-label=代码示例>代码示例</a><ul><li><a href=#%e6%99%ae%e9%80%9a%e5%b7%a5%e7%a8%8b aria-label=普通工程>普通工程</a><li><a href=#spring-boot-%e5%b7%a5%e7%a8%8b aria-label="Spring Boot 工程">Spring Boot 工程</a></ul><li><a href=#%e6%a8%a1%e6%9d%bf%e8%af%ad%e6%b3%95 aria-label=模板语法>模板语法</a><ul><li><a href=#%e6%a8%a1%e6%9d%bf%e7%bb%93%e6%9e%84 aria-label=模板结构>模板结构</a><li><a href=#%e6%8f%92%e5%80%bc aria-label=插值>插值</a><li><a href=#%e8%a1%a8%e8%be%be%e5%bc%8f aria-label=表达式>表达式</a><ul><li><a href=#%e5%86%85%e7%bd%ae%e5%87%bd%e6%95%b0%e5%8f%82%e8%80%83 aria-label=内置函数参考>内置函数参考</a></ul><li><a href=#%e6%8c%87%e4%bb%a4 aria-label=指令>指令</a></ul><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a><li><a href=#%e9%99%84%e5%bd%95 aria-label=附录>附录</a><ul><li><a href=#freemarker-%e6%94%af%e6%8c%81%e7%9a%84%e8%bd%ac%e4%b9%89%e5%ad%97%e7%ac%a6 aria-label="FreeMarker 支持的转义字符">FreeMarker 支持的转义字符</a><li><a href=#ftl-%e4%b8%ad%e7%9a%84%e4%bf%9d%e7%95%99%e5%90%8d%e7%a7%b0 aria-label="FTL 中的保留名称">FTL 中的保留名称</a></li></div></details></div></aside><script src=/js/pe-toc.min.333917f495161b4fe36496cfe98a86a7fd010d84fa024c7c85b4c42ed9cb2d2b.js integrity="sha256-MzkX9JUWG0/jZJbP6YqGp/0BDYT6Akx8hbTELtnLLSs="></script><div class=post-content><h2 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h2><p><a href=https://freemarker.apache.org/index.html target=_blank rel="noopener nofollow noreferrer">Apache FreeMarker™</a> 是一个模板引擎：一个基于模板和变更数据生成文本输出（HTML 网页、电子邮件、配置文件、源代码等）的 Java 库。</p><p>FreeMarker 没有其他任何依赖，仅仅依赖 Java 自身。</p><p>最新版本：FreeMarker 2.3.32（2023-01-12）</p><h2 id=maven-依赖>maven 依赖<a hidden class=anchor aria-hidden=true href=#maven-依赖>#</a></h2><p>普通 Java 工程按如下方式引入：</p><div class="pe-code-block-wrap pe-code-details open"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-icon" aria-hidden=true></i>
<span>xml</span></div><div class=pe-code-block-header-center><span>pom.xml</span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5c-1.1046.0-2 .89543-2 2h4c0-1.10457-.8954-2-2-2zm-3.46487.0C9.22675 2.3044 10.5194 1.5 12 1.5s2.7733.8044 3.4649 2H17.25c1.6569.0 3 1.34315 3 3v12c0 1.6569-1.0931 3-3 3H6.75c-1.65685.0-3-1.3431-3-3V6.5c0-1.65685 1.34315-3 3-3H8.53513zM8 5.5H6.75c-.55228.0-1 .44772-1 1v12c0 .552299999999999.44772 1 1 1h10.5C18.0523 19.5 18.25 19.0523 18.25 18.5V6.5c0-.55228-.447700000000001-1-1-1H16c0 1.10457-.8954 2-2 2H10c-1.10457.0-2-.89543-2-2z" fill="currentcolor"/></svg></button></div></div><div class=pe-code-details-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- https://mvnrepository.com/artifact/org.freemarker/freemarker --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.freemarker<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>freemarker<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>2.3.32<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></td></tr></table></div></div></div></div><p>如果是 Spring Boot 工程可以引入 <code>spring-boot-starter-freemarker</code>：</p><div class="pe-code-block-wrap pe-code-details open"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-icon" aria-hidden=true></i>
<span>xml</span></div><div class=pe-code-block-header-center><span>pom.xml</span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5c-1.1046.0-2 .89543-2 2h4c0-1.10457-.8954-2-2-2zm-3.46487.0C9.22675 2.3044 10.5194 1.5 12 1.5s2.7733.8044 3.4649 2H17.25c1.6569.0 3 1.34315 3 3v12c0 1.6569-1.0931 3-3 3H6.75c-1.65685.0-3-1.3431-3-3V6.5c0-1.65685 1.34315-3 3-3H8.53513zM8 5.5H6.75c-.55228.0-1 .44772-1 1v12c0 .552299999999999.44772 1 1 1h10.5C18.0523 19.5 18.25 19.0523 18.25 18.5V6.5c0-.55228-.447700000000001-1-1-1H16c0 1.10457-.8954 2-2 2H10c-1.10457.0-2-.89543-2-2z" fill="currentcolor"/></svg></button></div></div><div class=pe-code-details-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-freemarker --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.springframework.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>spring-boot-starter-freemarker<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span></span></span></code></pre></td></tr></table></div></div></div></div><h2 id=代码示例>代码示例<a hidden class=anchor aria-hidden=true href=#代码示例>#</a></h2><h3 id=普通工程>普通工程<a hidden class=anchor aria-hidden=true href=#普通工程>#</a></h3><p>以下代码来源于 <a href=https://freemarker.apache.org/docs/pgui_quickstart_all.html target=_blank rel="noopener nofollow noreferrer">FreeMarker 官方教程</a>：</p><div class="pe-code-block-wrap pe-code-details open"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-icon" aria-hidden=true></i>
<span>java</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5c-1.1046.0-2 .89543-2 2h4c0-1.10457-.8954-2-2-2zm-3.46487.0C9.22675 2.3044 10.5194 1.5 12 1.5s2.7733.8044 3.4649 2H17.25c1.6569.0 3 1.34315 3 3v12c0 1.6569-1.0931 3-3 3H6.75c-1.65685.0-3-1.3431-3-3V6.5c0-1.65685 1.34315-3 3-3H8.53513zM8 5.5H6.75c-.55228.0-1 .44772-1 1v12c0 .552299999999999.44772 1 1 1h10.5C18.0523 19.5 18.25 19.0523 18.25 18.5V6.5c0-.55228-.447700000000001-1-1-1H16c0 1.10457-.8954 2-2 2H10c-1.10457.0-2-.89543-2-2z" fill="currentcolor"/></svg></button></div></div><div class=pe-code-details-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>freemarker.template.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.io.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Test</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/* ------------------------------------------------------------------------ */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/* You should do this ONLY ONCE in the whole application life-cycle:        */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/* Create and adjust the configuration singleton */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Configuration</span><span class=w> </span><span class=n>cfg</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Configuration</span><span class=p>(</span><span class=n>Configuration</span><span class=p>.</span><span class=na>VERSION_2_3_32</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>cfg</span><span class=p>.</span><span class=na>setDirectoryForTemplateLoading</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>File</span><span class=p>(</span><span class=s>&#34;/where/you/store/templates&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Recommended settings for new projects:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>cfg</span><span class=p>.</span><span class=na>setDefaultEncoding</span><span class=p>(</span><span class=s>&#34;UTF-8&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>cfg</span><span class=p>.</span><span class=na>setTemplateExceptionHandler</span><span class=p>(</span><span class=n>TemplateExceptionHandler</span><span class=p>.</span><span class=na>RETHROW_HANDLER</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>cfg</span><span class=p>.</span><span class=na>setLogTemplateExceptions</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>cfg</span><span class=p>.</span><span class=na>setWrapUncheckedExceptions</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>cfg</span><span class=p>.</span><span class=na>setFallbackOnNullLoopVariable</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>cfg</span><span class=p>.</span><span class=na>setSQLDateAndTimeTimeZone</span><span class=p>(</span><span class=n>TimeZone</span><span class=p>.</span><span class=na>getDefault</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/* ------------------------------------------------------------------------ */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/* You usually do these for MULTIPLE TIMES in the application life-cycle:   */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/* Create a data-model */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>root</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;user&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Big Joe&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Product</span><span class=w> </span><span class=n>latest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Product</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>latest</span><span class=p>.</span><span class=na>setUrl</span><span class=p>(</span><span class=s>&#34;products/greenmouse.html&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>latest</span><span class=p>.</span><span class=na>setName</span><span class=p>(</span><span class=s>&#34;green mouse&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>root</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;latestProduct&#34;</span><span class=p>,</span><span class=w> </span><span class=n>latest</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/* Get the template (uses cache internally) */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Template</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cfg</span><span class=p>.</span><span class=na>getTemplate</span><span class=p>(</span><span class=s>&#34;test.ftlh&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=cm>/* Merge data-model with template */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Writer</span><span class=w> </span><span class=n>out</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>OutputStreamWriter</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>temp</span><span class=p>.</span><span class=na>process</span><span class=p>(</span><span class=n>root</span><span class=p>,</span><span class=w> </span><span class=n>out</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// Note: Depending on what `out` is, you may need to call `out.close()`.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// This is usually the case for file output, but not for servlet output.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>Product 类如下：</p><div class="pe-code-block-wrap pe-code-details open"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-icon" aria-hidden=true></i>
<span>java</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5c-1.1046.0-2 .89543-2 2h4c0-1.10457-.8954-2-2-2zm-3.46487.0C9.22675 2.3044 10.5194 1.5 12 1.5s2.7733.8044 3.4649 2H17.25c1.6569.0 3 1.34315 3 3v12c0 1.6569-1.0931 3-3 3H6.75c-1.65685.0-3-1.3431-3-3V6.5c0-1.65685 1.34315-3 3-3H8.53513zM8 5.5H6.75c-.55228.0-1 .44772-1 1v12c0 .552299999999999.44772 1 1 1h10.5C18.0523 19.5 18.25 19.0523 18.25 18.5V6.5c0-.55228-.447700000000001-1-1-1H16c0 1.10457-.8954 2-2 2H10c-1.10457.0-2-.89543-2-2z" fill="currentcolor"/></svg></button></div></div><div class=pe-code-details-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * Product bean; note that it must be a public class!
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Product</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>url</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// As per the JavaBeans spec., this defines the &#34;url&#34; bean property</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// It must be public!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getUrl</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>url</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setUrl</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>url</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>url</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// As per the JavaBean spec., this defines the &#34;name&#34; bean property</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// It must be public!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>getName</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setName</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>FreeMarker 模板 <code>test.ftlh</code> 如下：</p><div class="pe-code-block-wrap pe-code-details open"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-icon" aria-hidden=true></i>
<span>html</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5c-1.1046.0-2 .89543-2 2h4c0-1.10457-.8954-2-2-2zm-3.46487.0C9.22675 2.3044 10.5194 1.5 12 1.5s2.7733.8044 3.4649 2H17.25c1.6569.0 3 1.34315 3 3v12c0 1.6569-1.0931 3-3 3H6.75c-1.65685.0-3-1.3431-3-3V6.5c0-1.65685 1.34315-3 3-3H8.53513zM8 5.5H6.75c-.55228.0-1 .44772-1 1v12c0 .552299999999999.44772 1 1 1h10.5C18.0523 19.5 18.25 19.0523 18.25 18.5V6.5c0-.55228-.447700000000001-1-1-1H16c0 1.10457-.8954 2-2 2H10c-1.10457.0-2-.89543-2-2z" fill="currentcolor"/></svg></button></div></div><div class=pe-code-details-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Welcome!<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>Welcome ${user}!<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>Our latest product:
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;${latestProduct.url}&#34;</span><span class=p>&gt;</span>${latestProduct.name}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>!
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=spring-boot-工程>Spring Boot 工程<a hidden class=anchor aria-hidden=true href=#spring-boot-工程>#</a></h3><p>在 Spring Boot 中实现上述功能（需引入 <code>spring-boot-starter-freemarker</code> 依赖）：</p><div class="pe-code-block-wrap pe-code-details open"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-icon" aria-hidden=true></i>
<span>java</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5c-1.1046.0-2 .89543-2 2h4c0-1.10457-.8954-2-2-2zm-3.46487.0C9.22675 2.3044 10.5194 1.5 12 1.5s2.7733.8044 3.4649 2H17.25c1.6569.0 3 1.34315 3 3v12c0 1.6569-1.0931 3-3 3H6.75c-1.65685.0-3-1.3431-3-3V6.5c0-1.65685 1.34315-3 3-3H8.53513zM8 5.5H6.75c-.55228.0-1 .44772-1 1v12c0 .552299999999999.44772 1 1 1h10.5C18.0523 19.5 18.25 19.0523 18.25 18.5V6.5c0-.55228-.447700000000001-1-1-1H16c0 1.10457-.8954 2-2 2H10c-1.10457.0-2-.89543-2-2z" fill="currentcolor"/></svg></button></div></div><div class=pe-code-details-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>freemarker.template.Configuration</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>freemarker.template.Template</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.beans.factory.annotation.Autowired</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.boot.ApplicationArguments</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.boot.ApplicationRunner</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>org.springframework.stereotype.Component</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.io.OutputStreamWriter</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.io.Writer</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.HashMap</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.Map</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Component</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>TestRunner</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>ApplicationRunner</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Configuration</span><span class=w> </span><span class=n>configuration</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setConfiguration</span><span class=p>(</span><span class=n>Configuration</span><span class=w> </span><span class=n>configuration</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>configuration</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>configuration</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=n>ApplicationArguments</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Map</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HashMap</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>root</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;user&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Big Joe&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Product</span><span class=w> </span><span class=n>latest</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Product</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>latest</span><span class=p>.</span><span class=na>setUrl</span><span class=p>(</span><span class=s>&#34;products/greenmouse.html&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>latest</span><span class=p>.</span><span class=na>setName</span><span class=p>(</span><span class=s>&#34;green mouse&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>root</span><span class=p>.</span><span class=na>put</span><span class=p>(</span><span class=s>&#34;latestProduct&#34;</span><span class=p>,</span><span class=w> </span><span class=n>latest</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Template</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>configuration</span><span class=p>.</span><span class=na>getTemplate</span><span class=p>(</span><span class=s>&#34;test.ftlh&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Writer</span><span class=w> </span><span class=n>out</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>OutputStreamWriter</span><span class=p>(</span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>temp</span><span class=p>.</span><span class=na>process</span><span class=p>(</span><span class=n>root</span><span class=p>,</span><span class=w> </span><span class=n>out</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>Product 类（使用 Lombok)：</p><div class="pe-code-block-wrap pe-code-details open"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-icon" aria-hidden=true></i>
<span>java</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5c-1.1046.0-2 .89543-2 2h4c0-1.10457-.8954-2-2-2zm-3.46487.0C9.22675 2.3044 10.5194 1.5 12 1.5s2.7733.8044 3.4649 2H17.25c1.6569.0 3 1.34315 3 3v12c0 1.6569-1.0931 3-3 3H6.75c-1.65685.0-3-1.3431-3-3V6.5c0-1.65685 1.34315-3 3-3H8.53513zM8 5.5H6.75c-.55228.0-1 .44772-1 1v12c0 .552299999999999.44772 1 1 1h10.5C18.0523 19.5 18.25 19.0523 18.25 18.5V6.5c0-.55228-.447700000000001-1-1-1H16c0 1.10457-.8954 2-2 2H10c-1.10457.0-2-.89543-2-2z" fill="currentcolor"/></svg></button></div></div><div class=pe-code-details-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>lombok.Data</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>Product</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>url</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>模板文件放在 <code>/resources/templates</code> 目录下。</p><div class="pe-details admonition tip open"><div class="pe-details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>提示<i class="pe-details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=pe-details-content><div class=admonition-content>Spring Boot 默认封装了 FreeMarker 配置，我们可以直接注入使用。也可以修改 FreeMarker 配置，如缓存、模板路径、模板文件后缀等。配置节点以 <code>spring.freemarker</code> 为前缀。</div></div></div><h2 id=模板语法>模板语法<a hidden class=anchor aria-hidden=true href=#模板语法>#</a></h2><div class="pe-details admonition tip open"><div class="pe-details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>提示<i class="pe-details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=pe-details-content><div class=admonition-content>具体详细的语法及说明应参考<a href=https://freemarker.apache.org/docs/index.html>官方文档</a>。</div></div></div><h3 id=模板结构>模板结构<a hidden class=anchor aria-hidden=true href=#模板结构>#</a></h3><p>FTL 模板由以下部分混合而成：</p><ul><li><strong>文本（Text）</strong>： 文本内容会原样输出。</li><li><strong>插值（<strong>Interpolation</strong>）</strong>：这部分的输出会被计算结果替代。插值使用 <code>${...}</code>。（注：<code>#{...}</code> 已被弃用。<a href=https://freemarker.apache.org/docs/ref_depr_numerical_interpolation.html target=_blank rel="noopener nofollow noreferrer">See more here</a>）</li><li><strong>FTL 标签（FTL tags）</strong>：与 HTML 标签相似，用于 FreeMarker 指令。</li><li><strong>注释（Comments）</strong>：使用 <code>&lt;#--</code> 和 <code>--></code> 来分隔。注释会被 FreeMarker 直接忽略，不会在输出内容中显示。</li></ul><h3 id=插值>插值<a hidden class=anchor aria-hidden=true href=#插值>#</a></h3><p>标准格式为：<code>${expression}</code> 。其中 <code>expression</code> 可以是所有类型的表达式。如：<code>${100 + x}</code></p><div class="pe-details admonition tip open"><div class="pe-details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>提示<i class="pe-details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=pe-details-content><div class=admonition-content>插值表达式也可以使用 <code>[=expression]</code> 形式。参考 <a href=https://freemarker.apache.org/docs/dgui_misc_alternativesyntax.html target=_blank rel="noopener nofollow noreferrer">See more about alternative syntaxes&mldr;</a></div></div></div><h3 id=表达式>表达式<a hidden class=anchor aria-hidden=true href=#表达式>#</a></h3><ul><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_direct target=_blank rel="noopener nofollow noreferrer">直接指定值</a><ul><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_direct_string target=_blank rel="noopener nofollow noreferrer">Strings</a>: <code>"Foo"</code> or <code>'Foo'</code> or <code>"It's \"quoted\""</code> or <code>'It\'s "quoted"'</code> or <code>r"C:\raw\string"</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_direct_number target=_blank rel="noopener nofollow noreferrer">Numbers</a>: <code>123.45</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_direct_boolean target=_blank rel="noopener nofollow noreferrer">Booleans</a>: <code>true</code>, <code>false</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_direct_seuqence target=_blank rel="noopener nofollow noreferrer">Sequences</a>: <code>["foo", "bar", 123.45]</code>; Ranges: <code>0..9</code>, <code>0..&lt;10</code> (or <code>0..!10</code>), <code>0..</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_direct_hash target=_blank rel="noopener nofollow noreferrer">Hashes</a>: <code>{"name":"green mouse", "price":150}</code></li></ul></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_var target=_blank rel="noopener nofollow noreferrer">检索变量</a><ul><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_var_toplevel target=_blank rel="noopener nofollow noreferrer">顶层变量</a>: <code>user</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_var_hash target=_blank rel="noopener nofollow noreferrer">从 Hashes 中检索数据</a>: <code>user.name</code>, <code>user["name"]</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_var_sequence target=_blank rel="noopener nofollow noreferrer">从 Sequences 中检索数据</a>: <code>products[5]</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_var_special target=_blank rel="noopener nofollow noreferrer">特殊变量</a>: <code>.main</code></li></ul></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_stringop target=_blank rel="noopener nofollow noreferrer">字符串操作</a><ul><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_stringop_interpolation target=_blank rel="noopener nofollow noreferrer">插值（或连接）</a>: <code>"Hello ${user}!"</code> (or <code>"Hello " + user + "!"</code>)</li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_get_character target=_blank rel="noopener nofollow noreferrer">获取一个字符</a>: <code>name[0]</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_stringop_slice target=_blank rel="noopener nofollow noreferrer">字符串切片</a> Inclusive end: <code>name[0..4]</code>, Exclusive end: <code>name[0..&lt;5]</code>, Length-based (lenient): <code>name[0..*5]</code>, Remove starting: <code>name[5..]</code></li></ul></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_sequenceop target=_blank rel="noopener nofollow noreferrer">Sequence 操作</a><ul><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_sequenceop_cat target=_blank rel="noopener nofollow noreferrer">连接</a>: <code>users + ["guest"]</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_seqenceop_slice target=_blank rel="noopener nofollow noreferrer">Sequence 切片</a>: Inclusive end: <code>products[20..29]</code>, Exclusive end: <code>products[20..&lt;30]</code>, Length-based (lenient): <code>products[20..*10]</code>, Remove starting: <code>products[20..]</code></li></ul></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_hashop target=_blank rel="noopener nofollow noreferrer">Hash 操作</a><ul><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_hashop_cat target=_blank rel="noopener nofollow noreferrer">连接</a>: <code>passwords + { "joe": "secret42" }</code></li></ul></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_arit target=_blank rel="noopener nofollow noreferrer">算数运算</a>: <code>(x * 1.5 + 10) / 2 - y % 100</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_comparison target=_blank rel="noopener nofollow noreferrer">比较运算</a>: <code>x == y</code>, <code>x != y</code>, <code>x &lt; y</code>, <code>x > y</code>, <code>x >= y</code>, <code>x &lt;= y</code>, <code>x lt y</code>, <code>x lte y</code>, <code>x gt y</code>, <code>x gte y</code>, &mldr;etc.</li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_logicalop target=_blank rel="noopener nofollow noreferrer">逻辑操作</a>: <code>!registered && (firstVisit || fromEurope)</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_builtin target=_blank rel="noopener nofollow noreferrer">内建函数</a>: <code>name?upper_case</code>, <code>path?ensure_starts_with('/')</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_methodcall target=_blank rel="noopener nofollow noreferrer">方法调用</a>: <code>repeat("What", 3)</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_missing target=_blank rel="noopener nofollow noreferrer">处理不存在的值</a>:<ul><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_missing_default target=_blank rel="noopener nofollow noreferrer">默认值</a>: <code>name!"unknown"</code> or <code>(user.name)!"unknown"</code> or <code>name!</code> or <code>(user.name)!</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_missing_test target=_blank rel="noopener nofollow noreferrer">检测不存在值</a>: <code>name??</code> or <code>(user.name)??</code></li></ul></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_assignment target=_blank rel="noopener nofollow noreferrer">赋值操作</a>: <code>=</code>, <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code>, <code>++</code>, <code>--</code></li><li><a href=https://freemarker.apache.org/docs/dgui_template_exp.html#dgui_template_exp_lambda target=_blank rel="noopener nofollow noreferrer">Local lambdas</a>: <code>x -> x + 1</code>, <code>(x, y) -> x + y</code></li></ul><h4 id=内置函数参考>内置函数参考<a hidden class=anchor aria-hidden=true href=#内置函数参考>#</a></h4><ul><li><a href=https://freemarker.apache.org/docs/ref_builtins_alphaidx.html target=_blank rel="noopener nofollow noreferrer">字母索引</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_string.html target=_blank rel="noopener nofollow noreferrer">字符串内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_number.html target=_blank rel="noopener nofollow noreferrer">数字内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_date.html target=_blank rel="noopener nofollow noreferrer">日期内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_boolean.html target=_blank rel="noopener nofollow noreferrer">布尔值内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_sequence.html target=_blank rel="noopener nofollow noreferrer">序列内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_hash.html target=_blank rel="noopener nofollow noreferrer">哈希内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_node.html target=_blank rel="noopener nofollow noreferrer">结点（XML） 内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_loop_var.html target=_blank rel="noopener nofollow noreferrer">循环变量内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_type_independent.html target=_blank rel="noopener nofollow noreferrer">独立类型内置函数</a></li><li><a href=https://freemarker.apache.org/docs/ref_builtins_expert.html target=_blank rel="noopener nofollow noreferrer">很少使用的专家内置函数</a></li></ul><h3 id=指令>指令<a hidden class=anchor aria-hidden=true href=#指令>#</a></h3><p>标准格式是使用两种 FTL 标签：</p><ul><li>开始标签：<code>&lt;#directivename parameters></code></li><li>结束标签：<code>&lt;/#directivename></code></li></ul><p>例如：<code>&lt;#if something>...&lt;/#if></code></p><p>FTL 标签与 HTML 标签一样，必须正确嵌套。所以下面的代码是错误的，因为 if 指令既在 list 指令的嵌套内容的内部又在外部：</p><div class="pe-code-block-wrap pe-code-details open"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-icon" aria-hidden=true></i>
<span>html</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="pe-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5c-1.1046.0-2 .89543-2 2h4c0-1.10457-.8954-2-2-2zm-3.46487.0C9.22675 2.3044 10.5194 1.5 12 1.5s2.7733.8044 3.4649 2H17.25c1.6569.0 3 1.34315 3 3v12c0 1.6569-1.0931 3-3 3H6.75c-1.65685.0-3-1.3431-3-3V6.5c0-1.65685 1.34315-3 3-3H8.53513zM8 5.5H6.75c-.55228.0-1 .44772-1 1v12c0 .552299999999999.44772 1 1 1h10.5C18.0523 19.5 18.25 19.0523 18.25 18.5V6.5c0-.55228-.447700000000001-1-1-1H16c0 1.10457-.8954 2-2 2H10c-1.10457.0-2-.89543-2-2z" fill="currentcolor"/></svg></button></div></div><div class=pe-code-details-content><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=err>&lt;</span>#list animals as animal&gt;
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>${animal.name} for ${animal.price} Euros
</span></span><span class=line><span class=cl>  <span class=err>&lt;</span>#if user == &#34;Big Joe&#34;&gt;
</span></span><span class=line><span class=cl>     (except for you)
</span></span><span class=line><span class=cl><span class=err>&lt;</span>/#list&gt; <span class=err>&lt;</span>#-- WRONG! The &#34;if&#34; has to be closed first. --&gt;
</span></span><span class=line><span class=cl><span class=err>&lt;</span>/#if&gt;
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span></span></span></code></pre></td></tr></table></div></div></div></div><div class="pe-details admonition tip open"><div class="pe-details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>提示<i class="pe-details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=pe-details-content><div class=admonition-content><p>FreeMarker 可以使用 <code>[</code> 和 <code>]</code> 替代 <code>&lt;</code> 和 <code>></code>。例如：<code>[#if user == "Big Joe"]...[/#if]</code>。</p><p>更多信息请阅读：<a href=https://freemarker.apache.org/docs/dgui_misc_alternativesyntax.html target=_blank rel="noopener nofollow noreferrer">Miscellaneous/Alternative (square bracket) syntax.</a></p></div></div></div><p>指令参考：</p><ul><li><a href=https://freemarker.apache.org/docs/ref_directive_alphaidx.html target=_blank rel="noopener nofollow noreferrer">Alphabetical index</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_assign.html target=_blank rel="noopener nofollow noreferrer">assign</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_attempt.html target=_blank rel="noopener nofollow noreferrer">attempt, recover</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_autoesc.html target=_blank rel="noopener nofollow noreferrer">autoesc</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_compress.html target=_blank rel="noopener nofollow noreferrer">compress</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_escape.html target=_blank rel="noopener nofollow noreferrer">escape, noescape (deprecated)</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_flush.html target=_blank rel="noopener nofollow noreferrer">flush</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_ftl.html target=_blank rel="noopener nofollow noreferrer">ftl</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_function.html target=_blank rel="noopener nofollow noreferrer">function, return</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_global.html target=_blank rel="noopener nofollow noreferrer">global</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_if.html target=_blank rel="noopener nofollow noreferrer">if, else, elseif</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_import.html target=_blank rel="noopener nofollow noreferrer">import</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_include.html target=_blank rel="noopener nofollow noreferrer">include</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_list.html target=_blank rel="noopener nofollow noreferrer">list, else, items, sep, break, continue</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_local.html target=_blank rel="noopener nofollow noreferrer">local</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_macro.html target=_blank rel="noopener nofollow noreferrer">macro, nested, return</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_noautoesc.html target=_blank rel="noopener nofollow noreferrer">noautoesc</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_noparse.html target=_blank rel="noopener nofollow noreferrer">noparse</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_nt.html target=_blank rel="noopener nofollow noreferrer">nt</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_outputformat.html target=_blank rel="noopener nofollow noreferrer">outputformat</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_setting.html target=_blank rel="noopener nofollow noreferrer">setting</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_stop.html target=_blank rel="noopener nofollow noreferrer">stop</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_switch.html target=_blank rel="noopener nofollow noreferrer">switch, case, default, break</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_t.html target=_blank rel="noopener nofollow noreferrer">t, lt, rt</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_userDefined.html target=_blank rel="noopener nofollow noreferrer">User-defined directive (&lt;@&mldr;>)</a></li><li><a href=https://freemarker.apache.org/docs/ref_directive_visit.html target=_blank rel="noopener nofollow noreferrer">visit, recurse, fallback</a></li></ul><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><ul><li><a href=https://freemarker.apache.org/docs/index.html target=_blank rel="noopener nofollow noreferrer">FreeMarker 官方文档</a></li><li><a href=http://freemarker.foofun.cn/ target=_blank rel="noopener nofollow noreferrer">FreeMarker 中文手册</a></li></ul><h2 id=附录>附录<a hidden class=anchor aria-hidden=true href=#附录>#</a></h2><h3 id=freemarker-支持的转义字符>FreeMarker 支持的转义字符<a hidden class=anchor aria-hidden=true href=#freemarker-支持的转义字符>#</a></h3><table><thead><tr><th>Escape sequence</th><th>Meaning</th></tr></thead><tbody><tr><td><code>\"</code></td><td>引号 (u0022)</td></tr><tr><td><code>\'</code></td><td>单引号 (u0027)</td></tr><tr><td><code>\{</code></td><td>起始花括号:<code>{</code></td></tr><tr><td><code>\=</code></td><td>等号:<code>=</code> (Supported since FreeMarker 2.3.28.)</td></tr><tr><td><code>\\</code></td><td>反斜杠 (u005C)</td></tr><tr><td><code>\n</code></td><td>换行符 (u000A)</td></tr><tr><td><code>\r</code></td><td>回车 (u000D)</td></tr><tr><td><code>\t</code></td><td>水平制表符(又称为tab) (u0009)</td></tr><tr><td><code>\b</code></td><td>退格 (u0008)</td></tr><tr><td><code>\f</code></td><td>换页 (u000C)</td></tr><tr><td><code>\l</code></td><td>小于号:<code>&lt;</code></td></tr><tr><td><code>\g</code></td><td>大于号:<code>></code></td></tr><tr><td><code>\a</code></td><td>& 符:<code>&</code></td></tr><tr><td><code>\xCode</code></td><td>字符的十六进制<a href=http://freemarker.foofun.cn/gloss.html#gloss.unicode target=_blank rel="noopener nofollow noreferrer">Unicode</a> 码 (<a href=https://freemarker.apache.org/docs/gloss.html#gloss.UCS target=_blank rel="noopener nofollow noreferrer">UCS</a> code)</td></tr></tbody></table><p>在 <code>\x</code> 之后的 <em><strong>Code</strong></em> 是 1-4 位的十六进制码。下面这个示例中都是在字符串中放置版权符号： <code>"\xA9 1999-2001"</code>， <code>"\x0A9 1999-2001"</code>， <code>"\x00A9 1999-2001"</code>。 如果紧跟十六进制码后一位的字符也能解释成十六进制码时， 就必须把 4 位补全，否则 FreeMarker 就会误解你的意图。</p><h3 id=ftl-中的保留名称>FTL 中的保留名称<a hidden class=anchor aria-hidden=true href=#ftl-中的保留名称>#</a></h3><p>下面的这些名称不能在非方括号语法中被用作顶层变量 (比如 <code>.vars["in"]</code>)，因为这是 FTL 中的关键字：</p><ul><li><code>true</code>：布尔值"true"</li><li><code>false</code>：布尔值"false"</li><li><code>gt</code>：比较运算符"大于"</li><li><code>gte</code>：比较运算符"大于或等于"</li><li><code>lt</code>：比较运算符"小于"</li><li><code>lte</code>：比较运算符"小于或等于"</li><li><code>as</code>：由少数指令使用</li><li><code>in</code>：由少数指令使用</li><li><code>using</code>：由少数指令使用</li></ul></div><div class=pe-reward-wrap><div class=pe-reward><div class=pe-reward-btn><a href=javascript:void(0); onclick='document.querySelector(".pe-reward-overlay").classList.remove("hidden")'><svg t="1715776042195" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="17691" width="20" height="20"><path d="M835.52 337.824a159.04 159.04.0 01124.544 59.52 155.904 155.904.0 0130.4 134.08l-80.896 341.632a157.952 157.952.0 01-56.224 87.68 160.544 160.544.0 01-98.688 33.952H166.72c-75.712.0-137.44-60.96-137.44-136.256v-363.84c0-75.296 61.76-136.288 137.44-136.288h80.704c50.176.0 71.232-12.48 85.792-36.544 10.368-17.12 17.472-41.376 23.04-76 1.728-10.656 2.88-19.392 5.408-38.72 11.712-90.944 21.888-124.736 62.528-155.168 25.504-19.072 56.768-25.984 90.72-20.992 64.672 9.504 115.936 43.52 145.824 97.6 23.36 42.272 32.64 95.584 27.904 154.24-1.056 12.832-2.752 25.888-5.12 38.912-.64 3.68-1.856 9.024-3.712 16.192h155.68zm-261.472 80 14.72-51.104c9.472-32.704 15.04-53.376 16.064-59.2 1.92-10.56 3.264-21.024 4.096-31.296 3.584-43.84-3.04-81.6-18.208-109.056-17.472-31.68-46.88-51.2-87.392-57.12-13.696-2.016-23.456.128-31.168 5.888-15.808 11.84-22.4 33.792-31.136 101.312-2.56 20.16-3.84 29.44-5.76 41.248-7.04 43.872-16.704 76.8-33.536 104.64-28.736 47.52-75.424 75.2-154.24 75.2H166.72c-31.744.0-57.44 25.376-57.44 56.224v363.872c0 30.88 25.696 56.256 57.44 56.256h587.904c17.824.0 35.424-6.08 49.344-16.96 13.856-10.848 23.68-26.24 27.712-43.104l80.896-341.6a75.904 75.904.0 00-14.944-65.6 79.04 79.04.0 00-62.144-29.6H574.08zm-212.8 205.984 97.28 72.64 242.24-209.28s16.224-13.888 30.4-3.008c4.256 3.264 9.12 12.512-1.856 27.008L476.416 789.024s-19.392 24.864-42.4-.288l-109.12-138.208s-12.96-18.688 3.264-29.92c5.44-3.744 17.888-9.6 33.12 3.2z" fill="currentcolor" p-id="17692"/></svg></div><div class="pe-reward-overlay hidden"><div class=pe-reward-qr-wrap><div class=pe-reward-img><a class=fancybox rel=group><img src=https://tofuwine.github.io/images/wechat_pay.jpg alt=wechat_pay></a><p>微信</p></div><div class=pe-reward-img><a class=fancybox rel=group><img src=https://tofuwine.github.io/images/alipay.jpg alt=alipay></a><p>支付宝</p></div></div></div><p>如果本文对你有所帮助，可以点击上方按钮请作者喝杯咖啡！</p></div></div><script>document.querySelector(".pe-reward-overlay").addEventListener("click",e=>{e.target.classList.add("hidden")})</script><div class=pe-copyright><hr><blockquote><p>本文为原创内容，版权归作者所有。如需转载，请在文章中声明本文标题及链接。</p><p>文章标题：FreeMarker 基本用法 —— tofuwine</p><p>文章链接：<a href=https://tofuwine.github.io/articles/code/z/28095def-16f4-4aab-a023-8937447fa34f/ target=_blank>https://tofuwine.github.io/articles/code/z/28095def-16f4-4aab-a023-8937447fa34f/</a></p><p>许可协议：<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://tofuwine.github.io/tags/freemarker/>FreeMarker</a></li></ul><nav class=paginav><a class=prev href=https://tofuwine.github.io/articles/code/java/14d680b0-ef4b-402b-bd4a-99985034996f/><span class=title>« 上一页</span><br><span>Spring Boot 启动后自动执行方法的几种方式</span>
</a><a class=next href=https://tofuwine.github.io/articles/code/java/4e4e186a-79c1-4ec1-a6d8-bc1b629c27f7/><span class=title>下一页 »</span><br><span>Spring Bean Scope 解析</span></a></nav></footer><div class=pe-comments-decoration><p class=pe-comments-title>欢迎来到评论区</p><p class=pe-comments-subtitle>感谢您的耐心阅读！来选个表情，或者留个评论吧！</p></div><div id=pe-comments></div><script src=/js/pe-go-comment.min.86a214102576ba5f9b7bdc29eed8d58dd56e34aef80b3c65c73ea9cc88443696.js integrity="sha256-hqIUECV2ul+be9wp7tjVjdVuNK74Czxlxz6pzIhENpY="></script><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const s={src:"https://giscus.app/client.js","data-repo":"tofuwine/tofuwine.github.io","data-repo-id":"R_kgDOLz45lw","data-category":"Announcements","data-category-id":"DIC_kwDOLz45l84CfBDJ","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":getStoredTheme(),"data-lang":"zh-CN","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(s).forEach(([t,n])=>e.setAttribute(t,n)),document.querySelector("#pe-comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme);const n=document.querySelector("#theme-toggle-float");n&&n.addEventListener("click",setGiscusTheme)})</script></article></main><footer class=footer><span>&copy; 2024 <a href=https://tofuwine.github.io/>Tofuwine's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/tofuwine/PaperMod-PE rel=noopener target=_blank>PaperMod-PE</a></span></footer><div class=pe-right-sidebar><a href=#pe-comments class=pe-float-btn id=comments-link style=visibility:visible;opacity:1><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29.338 29.338" fill="currentcolor"><path d="M27.184 1.605H2.156C.967 1.605.0 2.572.0 3.76v17.572c0 1.188.967 2.155 2.156 2.155h13.543l5.057 3.777c.414.31.842.468 1.268.468.789.0 1.639-.602 1.637-1.923v-2.322h3.523c1.188.0 2.154-.967 2.154-2.155V3.76C29.338 2.572 28.371 1.605 27.184 1.605zM27.34 21.332c0 .085-.068.155-.154.155h-5.523v3.955l-5.297-3.956H2.156c-.086.0-.154-.07-.154-.155V3.759c0-.085.068-.155.154-.155v.001h25.029c.086.0.154.07.154.155L27.34 21.332zM5.505 10.792h4.334v4.333H5.505V10.792zm7 0h4.334v4.333h-4.334V10.792zm7 0h4.334v4.333h-4.334V10.792z"/></svg>
</a><a href=javascript:void(0); id=theme-toggle-float class=pe-float-btn><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</a><a href=#top class=pe-float-btn id=top-link><span id=pe-read-progress></span></a></div></body></html>